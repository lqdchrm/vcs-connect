(function(t){function e(e){for(var r,a,c=e[0],s=e[1],u=e[2],d=0,f=[];d<c.length;d++)a=c[d],Object.prototype.hasOwnProperty.call(o,a)&&o[a]&&f.push(o[a][0]),o[a]=0;for(r in s)Object.prototype.hasOwnProperty.call(s,r)&&(t[r]=s[r]);l&&l(e);while(f.length)f.shift()();return i.push.apply(i,u||[]),n()}function n(){for(var t,e=0;e<i.length;e++){for(var n=i[e],r=!0,c=1;c<n.length;c++){var s=n[c];0!==o[s]&&(r=!1)}r&&(i.splice(e--,1),t=a(a.s=n[0]))}return t}var r={},o={app:0},i=[];function a(e){if(r[e])return r[e].exports;var n=r[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.m=t,a.c=r,a.d=function(t,e,n){a.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},a.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.t=function(t,e){if(1&e&&(t=a(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)a.d(n,r,function(e){return t[e]}.bind(null,r));return n},a.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return a.d(e,"a",e),e},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p="vcs-connect/";var c=window["webpackJsonp"]=window["webpackJsonp"]||[],s=c.push.bind(c);c.push=e,c=c.slice();for(var u=0;u<c.length;u++)e(c[u]);var l=s;i.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},4099:function(t,e,n){"use strict";var r=n("64b7"),o=n.n(r);o.a},"56d7":function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d");var r=n("2b0e"),o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-app",{attrs:{id:"inspire"}},[n("sidenav",{model:{value:t.drawer,callback:function(e){t.drawer=e},expression:"drawer"}}),n("topbar",{attrs:{title:"VCS-Connect"},model:{value:t.drawer,callback:function(e){t.drawer=e},expression:"drawer"}},[n("appstate")],1),n("v-content",[n("v-container",{staticClass:"fill-height",attrs:{fluid:""}},[n("v-row",{attrs:{align:"center",justify:"center"}},[n("v-col",{staticClass:"text-center"},[n("router-view")],1)],1)],1)],1)],1)},i=[],a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-navigation-drawer",{attrs:{clipped:"",app:""},model:{value:t.drawer,callback:function(e){t.drawer=e},expression:"drawer"}},[n("v-list",{attrs:{dense:""}},[n("v-list-item",{attrs:{link:""}},[n("v-list-item-action",[n("v-icon",[t._v("mdi-home")])],1),n("v-list-item-content",[n("v-list-item-title",[t._v("Home")])],1)],1),n("v-list-item",{attrs:{link:""}},[n("v-list-item-action",[n("v-icon",[t._v("mdi-contact-mail")])],1),n("v-list-item-content",[n("v-list-item-title",[t._v("Contact")])],1)],1)],1)],1)},c=[],s={name:"SideNav",props:["value"],data:function(){return{drawer:null}},watch:{value:{immediate:!0,handler:function(t){this.drawer=t}},drawer:function(t){this.$emit("input",t)}}},u=s,l=n("2877"),d=n("6544"),f=n.n(d),p=n("132d"),m=n("8860"),h=n("da13"),v=n("1800"),b=n("5d23"),g=n("f774"),w=Object(l["a"])(u,a,c,!1,null,null,null),k=w.exports;f()(w,{VIcon:p["a"],VList:m["a"],VListItem:h["a"],VListItemAction:v["a"],VListItemContent:b["a"],VListItemTitle:b["b"],VNavigationDrawer:g["a"]});var y=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-app-bar",{attrs:{app:"",color:"primary",dense:"","clipped-left":"",dark:""}},[n("v-app-bar-nav-icon",{on:{click:function(e){return e.stopPropagation(),t.$emit("input",!t.value)}}}),n("v-toolbar-title",[t._v(t._s(t.title))]),n("v-spacer"),n("portal-target",{attrs:{name:"toolbar"}}),t._t("default")],2)},x=[],V={name:"TopBar",props:["title","value"],data:function(){return{}}},O=V,j=n("40dc"),_=n("5bc1"),C=n("2fa4"),R=n("2a7f"),$=Object(l["a"])(O,y,x,!1,null,null,null),S=$.exports;f()($,{VAppBar:j["a"],VAppBarNavIcon:_["a"],VSpacer:C["a"],VToolbarTitle:R["b"]});var T=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-toolbar-items",[n("v-btn",{attrs:{icon:""},on:{click:function(e){return t.connect()}}},[n("v-icon",[t._v(t._s(t.connectIcon))])],1),n("portal",{attrs:{to:"toolbar"}},[n("div",{staticClass:"d-flex d-flex-row"},[n("v-text-field",{attrs:{"solo-inverted":"",flat:"","hide-details":"",dense:"",rounded:"","single-line":"",label:"Room"},model:{value:t.room,callback:function(e){t.room=e},expression:"room"}}),n("v-text-field",{attrs:{"solo-inverted":"",flat:"","hide-details":"",dense:"",rounded:"","single-line":"",label:"Name"},model:{value:t.name,callback:function(e){t.name=e},expression:"name"}})],1)])],1)},A=[],I=(n("b0c0"),n("2ef0")),D={name:"AppState",data:function(){return{room:this.$root.me.room,name:this.$root.me.name}},computed:{connectIcon:function(){return this.$root.me.listening?"mdi-lan-connect":"mdi-lan-disconnect"}},methods:{connect:function(){this.$root.me.setName(this.room,this.name)}}},E=D,N=(n("ac42"),n("8336")),B=n("8654"),P=Object(l["a"])(E,T,A,!1,null,"78646dc7",null),M=P.exports;f()(P,{VBtn:N["a"],VIcon:p["a"],VTextField:B["a"],VToolbarItems:R["a"]});var F={components:{Sidenav:k,Topbar:S,Appstate:M},data:function(){return{drawer:null}}},L=F,H=n("7496"),U=n("62ad"),J=n("a523"),q=n("a75b"),z=n("0fd9"),G=Object(l["a"])(L,o,i,!1,null,null,null),K=G.exports;f()(G,{VApp:H["a"],VCol:U["a"],VContainer:J["a"],VContent:q["a"],VRow:z["a"]});var Q=n("9483");Object(Q["a"])("".concat("vcs-connect/","service-worker.js"),{ready:function(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered:function(){console.log("Service worker has been registered.")},cached:function(){console.log("Content has been cached for offline use.")},updatefound:function(){console.log("New content is downloading.")},updated:function(){console.log("New content is available; please refresh.")},offline:function(){console.log("No internet connection found. App is running in offline mode.")},error:function(t){console.error("Error during service worker registration:",t)}});var W=n("8c4f"),X=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-container",[n("v-form",[n("v-text-field",{model:{value:t.partner,callback:function(e){t.partner=e},expression:"partner"}}),n("v-btn",{on:{click:function(e){return t.connect()}}},[t._v("Connect")])],1),t._l(t.conns,(function(t,e){return n("videobox",{key:e,attrs:{conn:t}})}))],2)},Y=[],Z=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-card",{staticClass:"d-inline-block mx-auto"},[n("v-container",[n("v-row",{attrs:{justify:"space-between"}},[n("v-col",{attrs:{cols:"auto"}},[n("video",{ref:"video",attrs:{width:"240",height:"160"}})])],1)],1),n("v-card-subtitle",{staticClass:"pb-0"},[t._v(t._s(t.conn.name))]),n("v-card-actions",[n("v-btn",{attrs:{icon:""},on:{click:function(e){return t.toggleCam()}}},[n("v-icon",{attrs:{color:t.color()}},[t._v("mdi-camera")])],1)],1)],1)},tt=[],et=(n("96cf"),n("1da1")),nt={name:"VideoBox",props:["conn"],data:function(){return{}},computed:{camActive:function(){this.conn.active}},mounted:function(){this.conn.setVideo(this.$refs.video)},methods:{color:function(){return this.conn.stream?"primary":""},toggleCam:function(){var t=this;return Object(et["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.conn.stream){e.next=5;break}return e.next=3,t.conn.connect();case 3:e.next=6;break;case 5:t.conn.disconnect();case 6:case"end":return e.stop()}}),e)})))()}},watch:{"conn.stream":{handler:function(){this.conn.setVideo(this.$refs.video)}}}},rt=nt,ot=(n("4099"),n("b0af")),it=n("99d9"),at=Object(l["a"])(rt,Z,tt,!1,null,"82f00fc0",null),ct=at.exports;f()(at,{VBtn:N["a"],VCard:ot["a"],VCardActions:it["a"],VCardSubtitle:it["b"],VCol:U["a"],VContainer:J["a"],VIcon:p["a"],VRow:z["a"]});var st={name:"Home",components:{Videobox:ct},data:function(){return{partner:"Bort2"}},computed:{conns:function(){return this.$root.me.connections}},methods:{connect:function(){this.$root.me.connectTo(this.partner)}}},ut=st,lt=n("4bd4"),dt=Object(l["a"])(ut,X,Y,!1,null,"7bdd23c7",null),ft=dt.exports;f()(dt,{VBtn:N["a"],VContainer:J["a"],VForm:lt["a"],VTextField:B["a"]}),r["default"].use(W["a"]);var pt=[{path:"/",name:"Home",component:ft}],mt=new W["a"]({routes:pt}),ht=mt,vt=n("f309");r["default"].use(vt["a"]);var bt=new vt["a"]({theme:{themes:{light:{primary:"#ef7d00",secondary:"#87856e",accent:"#ccc290"}}}}),gt=n("2b88"),wt=n.n(gt),kt=n("d4ec"),yt=n("bee2"),xt=(n("99af"),"pbd6co4wckd");function Vt(t,e){return"".concat(t,"-").concat(e,"-").concat(xt)}var Ot=function(){function t(e,n,r,o){if(Object(kt["a"])(this,t),!e||!n)throw new Error("Invalid connection");this.me=e,this.name=n,this.id=Vt(this.me.room,this.name),this.call=r||null,this.stream=o||null,this.video=null}return Object(yt["a"])(t,[{key:"setVideo",value:function(t){var e=this;this.video=t,this.video&&(this.stream?(this.video.srcObject=this.stream,this.video.oncanplay=function(){return e.video.play()}):(this.video.pause(),this.video.srcObject=null))}},{key:"connect",value:function(){var t=Object(et["a"])(regeneratorRuntime.mark((function t(){var e,n=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.disconnect(),t.next=3,this.me.getStream();case 3:e=t.sent,this.call=this.me.peer.call(this.id,e,{metadata:{name:this.me.name}}),this.call.on("stream",(function(t){n.stream=t})),this.call.on("close",(function(){n.disconnect()}));case 7:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"disconnect",value:function(){this.call&&(this.call.close(),this.call=null),this.stream=null,this.me.checkAllDisconnected()}},{key:"active",get:function(){return!!this.call&&!!this.stream}}]),t}(),jt=Ot,_t=n("a0bc"),Ct=n.n(_t);function Rt(){return $t.apply(this,arguments)}function $t(){return $t=Object(et["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,navigator.mediaDevices.getUserMedia({video:!0,audio:!1});case 2:return e=t.sent,t.abrupt("return",e);case 4:case"end":return t.stop()}}),t)}))),$t.apply(this,arguments)}function St(){return Tt.apply(this,arguments)}function Tt(){return Tt=Object(et["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,navigator.mediaDevices.getDisplayMedia({video:!0,audio:!1});case 2:return e=t.sent,t.abrupt("return",e);case 4:case"end":return t.stop()}}),t)}))),Tt.apply(this,arguments)}var At={config:{debug:2,iceServers:[{url:"stun:stun.l.google.com:19302"},{url:"stun:stun.l.google.com:19302"},{url:"stun:stun1.l.google.com:19302"},{url:"stun:stun2.l.google.com:19302"},{url:"stun:stun3.l.google.com:19302"},{url:"stun:stun4.l.google.com:19302"},{url:"stun:stun01.sipphone.com"},{url:"stun:stun.ekiga.net"},{url:"stun:stun.fwdnet.net"},{url:"stun:stun.ideasip.com"},{url:"stun:stun.iptel.org"},{url:"stun:stun.rixtelecom.se"},{url:"stun:stun.schlund.de"},{url:"stun:stunserver.org"},{url:"stun:stun.softjoys.com"},{url:"stun:stun.voiparound.com"},{url:"stun:stun.voipbuster.com"},{url:"stun:stun.voipstunt.com"},{url:"stun:stun.voxgratia.org"},{url:"stun:stun.xten.com"}]}},It=function(){function t(e,n){Object(kt["a"])(this,t),this.listening=!1,this.room=e,this.name=n,this.id=null,this.config=At,this.showDesktop=!1,this.stream=null,this.peer=null,this.connections={}}return Object(yt["a"])(t,[{key:"getStream",value:function(){var t=Object(et["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(this.stream){t.next=4;break}return t.next=3,this.showDesktop?St():Rt();case 3:this.stream=t.sent;case 4:return t.abrupt("return",this.stream);case 5:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"setName",value:function(t,e){this.disconnect(),t=t||"",e&&e.length>3&&(this.room=t,this.name=e,this.id=Vt(t,e),this.connect())}},{key:"disconnect",value:function(){for(var t in this.connections)this.connections[t].disconnect(),r["default"].delete(this.connections,t);this.peer&&(this.peer.destroy(),this.peer=null)}},{key:"checkAllDisconnected",value:function(){this.stream&&(Object(I["some"])(this.connections,(function(t){return t.active}))||(Object(I["forEach"])(this.stream.getTracks(),(function(t){return t.stop()})),this.stream=null))}},{key:"connect",value:function(){var t=this;this.disconnect(),this.name&&this.name.length>3&&(this.peer=new Ct.a(this.id,this.config),this.peer.on("open",function(){var e=Object(et["a"])(regeneratorRuntime.mark((function e(n){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.listening=!0,t.id=n;case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),this.peer.on("disconnected",(function(){t.listening=!1})),this.peer.on("error",(function(e){t.listening=!1,console.warn(e)})),this.peer.on("call",function(){var e=Object(et["a"])(regeneratorRuntime.mark((function e(n){var o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n.on("stream",(function(e){var o=new jt(t,n.metadata.name,n,e);r["default"].set(t.connections,n.peer,o)})),n.on("close",(function(){var e=t.connections[n.peer];e&&e.disconnect()})),e.next=4,t.getStream();case 4:o=e.sent,n.answer(o);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()))}},{key:"connectTo",value:function(t){var e=Vt(this.room,t);if(this.peer){var n=new jt(this,t);r["default"].set(this.connections,e,n)}}}]),t}(),Dt=function t(){Object(kt["a"])(this,t)};r["default"].use(wt.a),r["default"].config.productionTip=!1,new r["default"]({router:ht,vuetify:bt,render:function(t){return t(K)},data:function(){return{me:new It("Default","Bort"),settings:new Dt}}}).$mount("#app")},"5e11":function(t,e){function n(t){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}n.keys=function(){return[]},n.resolve=n,t.exports=n,n.id="5e11"},"64b7":function(t,e,n){},a2af:function(t,e,n){},ac42:function(t,e,n){"use strict";var r=n("a2af"),o=n.n(r);o.a}});
//# sourceMappingURL=app.07691868.js.map